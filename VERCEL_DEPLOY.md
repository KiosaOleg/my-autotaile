# –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –ø–æ –¥–µ–ø–ª–æ—é –Ω–∞ Vercel

## üö® –í–∞–∂–ª–∏–≤–æ: –ü—Ä–æ–±–ª–µ–º–∞ –∑ build —Å–∫—Ä–∏–ø—Ç–æ–º

### ‚ùå –ü–æ—Ç–æ—á–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞
Build —Å–∫—Ä–∏–ø—Ç –≤ `package.json` –º—ñ—Å—Ç–∏—Ç—å:
```json
"build": "npx prisma db pull && prisma generate && next build"
```

–¶–µ –ø—Ä–∏–∑–≤–æ–¥–∏—Ç—å –¥–æ –ø–æ–º–∏–ª–∫–∏ –Ω–∞ Vercel, –æ—Å–∫—ñ–ª—å–∫–∏:
- `prisma db pull` –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—è –¥–æ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
- Vercel –Ω–µ –º–∞—î –¥–æ—Å—Ç—É–ø—É –¥–æ MySQL –±–∞–∑–∏ –ø—ñ–¥ —á–∞—Å –∑–±—ñ—Ä–∫–∏
- IP –∞–¥—Ä–µ—Å–∏ Vercel –∑–º—ñ–Ω—é—é—Ç—å—Å—è, —â–æ —É—Å–∫–ª–∞–¥–Ω—é—î whitelist

### ‚úÖ –†—ñ—à–µ–Ω–Ω—è: –ó–º—ñ–Ω–µ–Ω–∏–π build —Å–∫—Ä–∏–ø—Ç

Build —Å–∫—Ä–∏–ø—Ç –∑–º—ñ–Ω–µ–Ω–æ –Ω–∞:
```json
"build": "prisma generate && next build"
```

–¢–µ–ø–µ—Ä –ø—ñ–¥ —á–∞—Å –∑–±—ñ—Ä–∫–∏:
1. ‚ùå –ù–µ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è `prisma db pull`
2. ‚úÖ –í–∏–∫–æ–Ω—É—î—Ç—å—Å—è `prisma generate` (—Å—Ç–≤–æ—Ä—é—î Prisma Client)
3. ‚úÖ –ó–±–∏—Ä–∞—î—Ç—å—Å—è Next.js –¥–æ–¥–∞—Ç–æ–∫

## –Ø–∫—â–æ –±–∞—á–∏—Ç–µ –ø–æ–º–∏–ª–∫—É "–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–µ—Ç–∞–ª—ñ"

### –ö—Ä–æ–∫ 1: –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ Environment Variables –≤ Vercel

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ Vercel Dashboard ‚Üí –í–∞—à –ø—Ä–æ–µ–∫—Ç ‚Üí Settings ‚Üí Environment Variables
2. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ —î –∑–º—ñ–Ω–Ω–∞ `DATABASE_URL`
3. –ó–Ω–∞—á–µ–Ω–Ω—è –º–∞—î –±—É—Ç–∏:
   ```
   mysql://my-autotaile_vercel_app:wW4kW2rX4e@212.162.152.33:3306/database2024
   ```
   –∞–±–æ –∑ –¥–æ–º–µ–Ω–æ–º:
   ```
   mysql://my-autotaile_vercel_app:wW4kW2rX4e@auto-db.pro:3306/database2024
   ```

### –ö—Ä–æ–∫ 2: –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ IP-–∞–¥—Ä–µ—Å–∏ Vercel –¥–æ–∑–≤–æ–ª–µ–Ω—ñ –≤ MySQL

MySQL –¥–æ–∑–≤–æ–ª—è—î –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –ª–∏—à–µ –∑ –ø–µ–≤–Ω–∏—Ö IP. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ:

- IP-–∞–¥—Ä–µ—Å–∏ Vercel –¥–æ–¥–∞–Ω—ñ –¥–æ whitelist –≤ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è—Ö MySQL
- Firewall –¥–æ–∑–≤–æ–ª—è—î –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –∑ IP Vercel

### –ö—Ä–æ–∫ 3: –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ Vercel

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ Vercel Dashboard ‚Üí –í–∞—à –ø—Ä–æ–µ–∫—Ç ‚Üí Deployments
2. –í–∏–±–µ—Ä—ñ—Ç—å –æ—Å—Ç–∞–Ω–Ω—ñ–π deployment ‚Üí Functions ‚Üí Logs
3. –®—É–∫–∞–π—Ç–µ –ø–æ–º–∏–ª–∫–∏ –∑ Prisma –∞–±–æ MySQL

### –ö—Ä–æ–∫ 4: –¢–∏–ø–æ–≤—ñ –ø–æ–º–∏–ª–∫–∏ —Ç–∞ —Ä—ñ—à–µ–Ω–Ω—è

#### "Authentication failed"

- ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ñ credentials –≤ DATABASE_URL
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ username —Ç–∞ password

#### "ECONNREFUSED" –∞–±–æ "ETIMEDOUT"

- ‚ùå IP-–∞–¥—Ä–µ—Å–∏ Vercel –Ω–µ –¥–æ–∑–≤–æ–ª–µ–Ω—ñ
- ‚úÖ –î–æ–¥–∞–π—Ç–µ IP Vercel –¥–æ whitelist MySQL

#### "DATABASE_URL is not set"

- ‚ùå Environment Variable –Ω–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π
- ‚úÖ –î–æ–¥–∞–π—Ç–µ DATABASE_URL –≤ Vercel Settings

### –ö—Ä–æ–∫ 5: –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è

–ü—ñ—Å–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Environment Variables:

1. –ó—Ä–æ–±—ñ—Ç—å –Ω–æ–≤–∏–π deployment (–∞–±–æ redeploy)
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å—Ç–æ—Ä—ñ–Ω–∫—É: `https://your-app.vercel.app`
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ API: `https://your-app.vercel.app/api/parts/1`

### –î–æ–¥–∞—Ç–∫–æ–≤–∞ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

–Ø–∫—â–æ –ø—Ä–æ–±–ª–µ–º–∞ –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è, –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ:

- –ß–∏ Prisma Client –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏–π (—î `postinstall` —Å–∫—Ä–∏–ø—Ç –≤ package.json)
- –ß–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç DATABASE_URL (–±–µ–∑ –ª–∞–ø–æ–∫ –≤ Vercel)
- –ß–∏ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö –¥–æ—Å—Ç—É–ø–Ω–∞ –∑ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É

## üîÑ –Ø–∫ –ø—Ä–∞—Ü—é—î —Å–∏—Å—Ç–µ–º–∞ –ø—ñ—Å–ª—è –∑–º—ñ–Ω

### –ù–∞ Vercel (Production)
1. **–ü—ñ–¥ —á–∞—Å –∑–±—ñ—Ä–∫–∏**: –í–∏–∫–æ–Ω—É—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ `prisma generate`
2. **–ü—ñ–¥ —á–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è**: API routes –∑–≤–µ—Ä—Ç–∞—é—Ç—å—Å—è –¥–æ –±–∞–∑–∏ —á–µ—Ä–µ–∑ —Ç—É–Ω–µ–ª—å/–ø—Ä–æ–∫—Å—ñ
3. **Prisma Client**: –í–∂–µ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏–π —ñ –≤–∫–ª—é—á–µ–Ω–∏–π –¥–æ –∑–±—ñ—Ä–∫–∏

### –õ–æ–∫–∞–ª—å–Ω–æ (Development)
–î–ª—è –ø–æ–≤–Ω–æ—Ü—ñ–Ω–Ω–æ—ó —Ä–æ–∑—Ä–æ–±–∫–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ:
```bash
# –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —á–µ—Ä–µ–∑ SSH —Ç—É–Ω–µ–ª—å
npm run db:tunnel

# –í –Ω–æ–≤–æ–º—É —Ç–µ—Ä–º—ñ–Ω–∞–ª—ñ - –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Å—Ö–µ–º–∏
npm run db:pull

# –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è Prisma Client
npm run db:generate

# –ó–∞–ø—É—Å–∫ –¥–æ–¥–∞—Ç–∫–∞
npm run dev
```

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∏ –¥–ª—è production
–Ø–∫—â–æ –ø—Ä—è–º–∏–π –¥–æ—Å—Ç—É–ø –¥–æ –ë–î –Ω–µ–º–æ–∂–ª–∏–≤–∏–π:

1. **API Proxy**: –°—Ç–≤–æ—Ä—ñ—Ç—å –≤–ª–∞—Å–Ω–∏–π API —Å–µ—Ä–≤–µ—Ä —è–∫ –ø—Ä–æ–∫—Å—ñ
2. **Database URL –∑ VPN**: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ VPN –¥–ª—è —Å—Ç–∞–±—ñ–ª—å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø—É
3. **External Database**: –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ Vercel Postgres –∞–±–æ —ñ–Ω—à—É —Ö–º–∞—Ä–Ω—É –ë–î

## üìã –ö–æ–º–∞–Ω–¥–∏ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤

| –°—Ü–µ–Ω–∞—Ä—ñ–π | –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å |
|----------|---------|------|
| –õ–æ–∫–∞–ª—å–Ω–∞ —Ä–æ–∑—Ä–æ–±–∫–∞ | `npm run db:setup && npm run dev` | –ü–æ–≤–Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∑ –ë–î |
| Production build | `npm run build` | –ó–±—ñ—Ä–∫–∞ –±–µ–∑ –¥–æ—Å—Ç—É–ø—É –¥–æ –ë–î |
| Full build (–ª–æ–∫–∞–ª—å–Ω–æ) | `npm run build:full` | –ó–±—ñ—Ä–∫–∞ –∑ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è–º —Å—Ö–µ–º–∏ |
| SSH —Ç—É–Ω–µ–ª—å | `npm run db:tunnel` | –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –ë–î —á–µ—Ä–µ–∑ SSH |
